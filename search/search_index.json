{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Instal\u00b7laci\u00f3 d'aplicacions per la terminal","text":""},{"location":"#installacio-amb-snap-i-apt","title":"Instal\u00b7laci\u00f3 amb snap i apt","text":""},{"location":"#installacio-amb-snap","title":"Instal\u00b7laci\u00f3 amb snap","text":"<p>Primer per instal\u00b7lar una aplicaci\u00f3 dels repositoris \u00e9s nom\u00e9s fer la seg\u00fcent comanda. </p> <p>Com podem veure no s'ha descarregat dels repositoris perqu\u00e8 no t\u00e9 el paquet per\u00f2 si fem sudo snap install telegram-desktop es descarregar\u00e0 ara ho far\u00e9.</p> <p></p> <p>Com podem veure s'ha instal\u00b7lat.</p> <p></p>"},{"location":"#instalacio-amb-apt","title":"Instalaci\u00f3 amb apt","text":"<p>I tornem a fer la comanda sudo apt install FileZilla. </p> <p>I aqu\u00ed ho tenim fet.</p> <p></p>"},{"location":"#instalacio-amb-wget","title":"Instalaci\u00f3 amb wget","text":"<p>Per descarregar amb wget hem de tindre el enlla\u00e7 del arxiu i descarregar-lo. </p> <p>I per instal\u00b7lar fem servir la comanda sudo dpkg -i fitxer.deb.  </p>"},{"location":"#pinning","title":"Pinning","text":"<p>Entrem en el mode root i mirem la versio del candidat. </p> <p>Per actualitzar el candidat a una versi\u00f3 m\u00e9s nova fem les seguents comandes. </p> <p>I com podem veure a canviat a una versi\u00f3 mes nova. </p> <p>Per tornar a la versi\u00f3 anterior hem de anar al seguent directori.</p> <p>cd /etc/apt/preferences.d</p> <p>I despres creem un arxiu anomenat i l'editem.</p> <p>nano apt_preferences</p> <p>Al editar hem de saber a quina versi\u00f3 volem tornar en el meu cas es la anteriorn per tant editem el primer quadrat ficant el numero de la versio anterior i al pi_priority fiquem 1001 per tindre major prioritat i al segon quadrat fiquem la ultima veri\u00f3 i pin_priority 500 guardem i sortim. </p> <p>Per comprovar simplement fem la comanda.</p> <p>apt-cache policy</p> <p>I ens surtira a vaix de tot les versions. </p> <p>I com ens podem ficsar ens a canviat el candidat d'actualitzaci\u00f3 dels paquets. </p>"},{"location":"#esta-obra-esta-marcada-con-cc0-10","title":"<p>Esta obra est\u00e1 marcada con CC0 1.0</p>","text":""},{"location":"ra2/","title":"Gesti\u00f3 d'usuaris i grups","text":""},{"location":"ra2/#que-es-un-usuari","title":"Qu\u00e8 \u00e9s un usuari?","text":"<p>Un usuari \u00e9s una entitat que representa una persona o un proc\u00e9s amb permisos per accedir i interactuar amb el sistema. Cada usuari t\u00e9 el seu propi entorn, configuracions i permisos, definits per un nom d\u2019usuari i una contrasenya.</p>"},{"location":"ra2/#que-es-un-grup-i-quina-utilitat-te-agrupar-usuaris-en-grups","title":"Qu\u00e8 \u00e9s un grup i quina utilitat t\u00e9 agrupar usuaris en grups?","text":"<p>Un grup \u00e9s una col\u00b7lecci\u00f3 d\u2019usuaris que comparteixen certs privilegis i permisos. Agrupar usuaris en grups permet gestionar els permisos d\u2019acc\u00e9s de manera m\u00e9s eficient, ja que podem assignar drets espec\u00edfics a un grup sencer en lloc de fer-ho usuari per usuari.</p> <p>Per exemple, en un entorn de treball, podem tenir un grup anomenat \"administradors\" amb permisos d'administraci\u00f3 del sistema i un altre grup anomenat \"empleats\" amb permisos m\u00e9s restringits. D\u2019aquesta manera, nom\u00e9s cal assignar permisos a aquests grups, i els usuaris que hi pertanyen autom\u00e0ticament reben els permisos associats. Aix\u00f2 simplifica molt la gesti\u00f3 d\u2019usuaris en sistemes amb molts comptes.</p>"},{"location":"ra2/#gestio-dusuaris-per-interficie-grafica","title":"Gesti\u00f3 d\u2019usuaris per interf\u00edcie gr\u00e0fica","text":"<p>Per gestionar un dels usuaris per la interf\u00edcie gr\u00e0fica hem de instalar el gnome-system-tools.</p> <p><code>sudo apt install gnome-system-tools</code></p> <p> </p> <p>Primer afegeixo un usuari.</p> <p> </p> <p>Ara afegeixo un grup.</p> <p> </p> <p>I li dono permisos.</p> <p></p> <p>I com podem veure no pot instalar res.</p> <p></p>"},{"location":"ra2/#4-fitxers-implicats-en-la-gestio-dusuaris-i-grups","title":"4 fitxers implicats en la gesti\u00f3 d'usuaris i grups","text":"<ol> <li> <p>/etc/passwd: Emmagatzema informaci\u00f3 b\u00e0sica sobre cada usuari del sistema. Cada l\u00ednia representa un usuari i cont\u00e9 camps com el nom d'usuari, l'UID, el GID, el directori d'inici, i el shell per defecte.</p> </li> <li> <p>/etc/group: Emmagatzema la informaci\u00f3 dels grups. Cada l\u00ednia representa un grup, especificant el nom del grup, el GID i una llista opcional d'usuaris que en s\u00f3n membres.</p> </li> <li> <p>/etc/shadow: Emmagatzema contrasenyes encriptades dels usuaris i altra informaci\u00f3 sobre la caducitat de contrasenyes. \u00c9s accessible nom\u00e9s per superusuaris per motius de seguretat.</p> </li> <li> <p>/etc/gshadow: Emmagatzema informaci\u00f3 sensible dels grups, com les contrasenyes dels grups i els seus administradors. Nom\u00e9s \u00e9s accessible per superusuaris.</p> </li> </ol>"},{"location":"ra2/#significat-de-i-en-el-fitxer-etcshadow","title":"Significat de * i ! en el fitxer <code>/etc/shadow</code>","text":"<ul> <li> <p>*: Indica que l'usuari no t\u00e9 una contrasenya configurada i, per tant, no pot iniciar sessi\u00f3.</p> </li> <li> <p>!: Indica que el compte est\u00e0 bloquejat temporalment i l'usuari no pot iniciar sessi\u00f3 fins que es tregui el !.</p> </li> </ul> <p>/etc/group: Cont\u00e9 informaci\u00f3 dels grups del sistema. Cada l\u00ednia defineix un grup.</p> <p>Exemple d'entrada:</p> <p><code>grup:x:1001:usuari1,usuari2</code></p> <p>Explicaci\u00f3 dels camps:</p> <ul> <li>grup: Nom del grup.</li> <li>x: La contrasenya del grup es troba en el fitxer /etc/gshadow.</li> <li>1001: GID del grup.</li> <li>usuari1,usuari2: Llista d'usuaris membres del grup (opcional).</li> </ul> <p>/etc/shadow: Emmagatzema les contrasenyes encriptades dels usuaris. Est\u00e0 protegit i nom\u00e9s els administradors poden accedir-hi.</p> <p>Exemple d'entrada:</p> <p><code>usuari:$6$abcdefg...:18993:0:99999:7:::</code></p> <p>Explicaci\u00f3 dels camps:</p> <ul> <li>usuari: Nom de l'usuari.</li> <li>$6$abcdefg...: Contrasenya encriptada.</li> <li>18993: Data de l'\u00faltim canvi de contrasenya (en dies des de l'\u00e8poca Unix).</li> <li>0: M\u00ednim de dies abans que l'usuari pugui canviar la contrasenya.</li> <li>99999: M\u00e0xim de dies que es pot mantenir la contrasenya sense canvis.</li> <li>7: Dies d'av\u00eds abans de la caducitat de la contrasenya.</li> <li>::: Camps opcionals per caducitat de l'usuari i altres.</li> </ul> <p>/etc/gshadow: Cont\u00e9 informaci\u00f3 sensible sobre els grups com contrasenyes encriptades i membres administradors.</p> <p>Exemple d'entrada:</p> <p><code>grup:$1$xyz...:admin_user:usuari1,usuari2</code></p> <p>Explicaci\u00f3 dels camps:</p> <ul> <li>grup: Nom del grup.</li> <li>$1$xyz...: Contrasenya encriptada del grup.</li> <li>admin_user: Administrador del grup.</li> <li>usuari1,usuari2: Membres del grup.</li> </ul>"},{"location":"ra2/#camp-epoch-en-etcshadow","title":"Camp \"epoch\" en <code>/etc/shadow</code>","text":"<p>El camp \"epoch\" fa refer\u00e8ncia al tercer camp del fitxer <code>/etc/shadow</code>, que cont\u00e9 la data de l'\u00faltim canvi de contrasenya en format de dies des de l'\u00e8poca Unix (1 de gener de 1970). Serveix per controlar la caducitat de la contrasenya.</p>"},{"location":"ra2/#creacio-dusuaris","title":"Creaci\u00f3 d'usuaris","text":"<p>Per crear un usuari en Linux, utilitza la comanda <code>useradd</code> o <code>adduser:</code></p> <ul> <li>Comanda b\u00e0sica amb <code>useradd:</code></li> </ul> <p><code>sudo useradd -m nom_usuari</code></p> <p></p> <p>L'opci\u00f3 <code>-m</code> crea autom\u00e0ticament el directori d'inici de l'usuari.</p> <p>Afegir contrasenya a l'usuari:</p> <p><code>sudo passwd nom_usuari</code></p> <p></p> <p>Explicaci\u00f3 dels camps:</p> <ul> <li>usuari1: Nom de l'usuari.</li> <li>x: Indica que la contrasenya est\u00e0 encriptada en el fitxer /etc/shadow per motius de  seguretat.</li> <li>1001: UID (User ID) de l'usuari.</li> <li>1001: GID (Group ID) de l'usuari per defecte.</li> <li>Nom d'usuari: Camp informatiu (nom complet, descripci\u00f3, etc.).</li> <li>/home/usuari1: Directori d'inici de l'usuari.</li> <li>/bin/bash: Shell per defecte que utilitza l'usuari.</li> </ul> <p></p>"},{"location":"ra2/#modificar-el-nom-dun-usuari","title":"Modificar el nom d'un usuari","text":"<p>Per canviar el nom d'un usuari, utilitza la comanda <code>usermod</code> amb l'opci\u00f3 <code>-l</code>:</p> <p><code>sudo usermod -l nou_nom antic_nom</code></p> <p></p> <p></p> <p>Tingues en compte que <code>-l</code> nom\u00e9s canvia el nom d'inici de sessi\u00f3 de l'usuari. Per canviar tamb\u00e9 el directori d'inici, utilitza l'opci\u00f3 <code>-d</code>:</p> <p><code>sudo usermod -d /home/nou_nom -m nou_nom</code></p> <p></p>"},{"location":"ra2/#eliminar-usuaris","title":"Eliminar usuaris","text":"<p>Hi ha dues maneres d'eliminar un usuari:</p> <p>Eliminar l'usuari sense esborrar el seu directori personal:</p> <p><code>sudo userdel nom_usuari</code></p> <p></p> <p></p> <p>Eliminar l'usuari i el seu directori personal:</p> <p><code>sudo userdel -r nom_usuari</code></p> <p></p> <p></p>"},{"location":"ra2/#bloquejar-i-desbloquejar-un-usuari","title":"Bloquejar i desbloquejar un usuari","text":"<ul> <li>Bloquejar un usuari:</li> </ul> <p><code>sudo usermod -L nom_usuari</code></p> <p></p> <p></p> <ul> <li>Desbloquejar un usuari:</li> </ul> <p><code>sudo usermod -U nom_usuari</code></p> <p></p> <p></p>"},{"location":"ra2/#explicacio-de-la-comanda-chage","title":"Explicaci\u00f3 de la comanda <code>chage</code>","text":"<p>La comanda <code>chage</code> permet modificar els par\u00e0metres de caducitat de la contrasenya d'un usuari. Aquesta comanda afecta el fitxer <code>/etc/shadow.</code></p> <p>Comanda per veure la configuraci\u00f3 actual d'un usuari:</p> <p><code>sudo chage -l nom_usuari</code></p> <p></p> <p>Comanda per establir una data de caducitat de contrasenya:</p> <p><code>sudo chage -E YYYY-MM-DD nom_usuari</code></p> <p></p> <p>Exemple per establir un per\u00edode de caducitat cada 90 dies:</p> <p><code>sudo chage -M 90 nom_usuari</code></p> <p></p>"},{"location":"ra2/#afegir-i-eliminar-un-usuari-del-grup-sudo","title":"Afegir i eliminar un usuari del grup <code>sudo</code>","text":"<ul> <li>Afegir un usuari al grup <code>sudo</code>:</li> </ul> <p><code>sudo usermod -aG sudo nom_usuari</code></p> <p></p> <p>Eliminar un usuari del grup <code>sudo</code>:</p> <p><code>sudo deluser nom_usuari sudo</code></p> <p></p>"},{"location":"ra2/#afegir-i-eliminar-un-usuari-del-grup-sudo_1","title":"Afegir i eliminar un usuari del grup <code>sudo</code>","text":"<p>Afegir un usuari al grup <code>sudo</code>:</p> <p><code>sudo usermod -aG sudo nom_usuari</code></p> <p></p> <p>Eliminar un usuari del grup <code>sudo</code>:</p> <p><code>sudo deluser nom_usuari sudo</code></p> <p></p> <p>Crear usuaris alumne1, alumne2, alumne3, alumne4 amb <code>adduser</code>.</p> <p></p> <p>Esborra l'alumne2 amb la comanda <code>deluser</code>.</p> <p></p> <p>Crea 2 grups (alumne i profe) amb la comanda addgroup.</p> <p></p> <p>Esborrar grup profe.</p> <p></p> <p>Crear grup jocs.</p> <p></p> <p>Modificar el grup alumne per alumnesASIX</p> <p></p> <p></p> <p>Modificar la paraula de pas d'alumne1</p> <p></p> <p>Modifica el nom d'alumne4 per alumne2</p> <p></p> <p>Assignar una paraula de pas al grup alumnesASIX</p> <p></p> <p>Modifica la paraula de pas de l'alumne1</p> <p></p> <p>Afegir dintre del grup alumnesASIX als 3 alumnes</p> <p></p> <p>Treure a l'alumne2 del grup</p> <p></p> <p>Afegeir a l'alumne1 al grup de jocs, per\u00f2 com a administrador i alumne2 com a usuari normal</p> <p></p> <p>Fer que l'alumne1 tingui com a grup principal el grup d'alumneASIX</p> <p></p> <p>Els 4 fitxers implicats en la gesti\u00f3 d'usuaris i grups:</p> <p><code>/etc/passwd:</code></p> <p>Cont\u00e9 informaci\u00f3 sobre els usuaris (nom, UID, GID principal, directori d\u2019inici, i shell).</p> <p></p> <p><code>/etc/group:</code></p> <p>Cont\u00e9 informaci\u00f3 sobre els grups (nom, GID, i llista d\u2019usuaris membres).</p> <p></p> <p><code>/etc/shadow:</code></p> <p>Cont\u00e9 les contrasenyes encriptades i altra informaci\u00f3 sobre les contrasenyes dels usuaris.</p> <p></p> <p><code>/etc/gshadow:</code></p> <p>Cont\u00e9 informaci\u00f3 sensible sobre els grups (contrasenyes de grup, administradors, i membres).</p> <p></p> <p>Quina \u00e9s la difer\u00e8ncia entre el que apareix al fitxer <code>/etc/group</code> i el que apareix al fitxer <code>/etc/gshadow</code>?</p> <ul> <li><code>/etc/group:</code></li> </ul> <p>Aquest fitxer cont\u00e9 informaci\u00f3 p\u00fablica sobre els grups, com el nom, el GID i els membres del grup.</p> <p>Exemple:</p> <p><code>jocs:x:1003:alumne2</code> <code>alumnesASIX:x:1004:alumne1,alumne2,alumne3</code></p> <ul> <li> <p><code>/etc/gshadow:</code> Aquest fitxer emmagatzema informaci\u00f3 m\u00e9s sensible i detallada sobre els grups, com:</p> </li> <li> <p>La contrasenya encriptada del grup (si n\u2019hi ha).</p> </li> <li>Els administradors del grup.</li> <li>Els membres normals del grup.</li> </ul> <p>Exemple:</p> <p><code>jocs:!:alumne1:alumne2</code> <code>alumnesASIX:!:alumne1:alumne2,alumne3</code></p> <p>Difer\u00e8ncia principal:</p> <ul> <li><code>/etc/group</code> nom\u00e9s llista els membres d\u2019un grup.</li> <li><code>/etc/gshadow</code> especifica quins membres s\u00f3n administradors i cont\u00e9 contrasenyes de grup encriptades (si s\u2019utilitzen).</li> </ul> <p>Bloquejar un usuari perqu\u00e8 no pugui accedir a un grup amb contrasenya amb <code>gpasswd</code></p> <ol> <li>Elimina la contrasenya del grup amb <code>gpasswd -r</code>:</li> </ol> <p></p> <p>Aix\u00f2 impedir\u00e0 que qualsevol usuari que no sigui membre del grup pugui accedir-hi, fins i tot si coneixia la contrasenya anterior.</p> <ol> <li>Afegeix expl\u00edcitament usuaris al grup si vols que hi accedeixin: Si un usuari necessita acc\u00e9s, cal afegir-lo manualment al grup:</li> </ol> <p></p> <ol> <li>Verifica els membres del grup: Pots comprovar els membres del grup amb:</li> </ol> <p></p> <p>Prova-ho:</p> <ol> <li>Estableix una contrasenya al grup amb:</li> </ol> <p></p> <ol> <li>Intenta accedir al grup amb <code>newgrp</code> des d'un usuari que no sigui membre:</li> </ol> <p></p>"},{"location":"ra2/#bloquejar-i-desbloquejar-un-usuari_1","title":"Bloquejar i desbloquejar un usuari","text":"<ul> <li>Bloquejar un usuari: Utilitza la comanda <code>passwd</code> amb l'opci\u00f3 <code>-l</code> per bloquejar un usuari. Aix\u00f2 impedeix que l'usuari pugui iniciar sessi\u00f3 al sistema.</li> </ul> <p>Per desbloquejar l\u2019usuari <code>alumne1</code>:</p> <p></p> <ul> <li>Comprovar si un usuari est\u00e0 bloquejat: Revisa el fitxer <code>/etc/shadow</code>. Si el segon camp de l'usuari comen\u00e7a amb un <code>!</code>, significa que est\u00e0 bloquejat.</li> </ul> <p></p>"},{"location":"ra2/#per-a-que-pot-servir-bloquejar-un-usuari","title":"Per a qu\u00e8 pot servir bloquejar un usuari?","text":"<p>Bloquejar un usuari pot ser \u00fatil en diverses situacions:</p> <ol> <li> <p>Suspensi\u00f3 temporal de l'acc\u00e9s: Si un empleat est\u00e0 de baixa o en vacances, es pot bloquejar l'acc\u00e9s temporalment sense eliminar el compte.</p> </li> <li> <p>Seguretat davant d'una amena\u00e7a: Si hi ha sospites que el compte ha estat comprom\u00e8s, es pot bloquejar immediatament mentre s'investiga.</p> </li> <li> <p>Compliment de pol\u00edtiques d\u2019empresa: Si un usuari incompleix normes, es pot suspendre el seu acc\u00e9s com a mesura disciplin\u00e0ria.</p> </li> <li> <p>Prevenci\u00f3 d'acc\u00e9s a comptes inactius: Els comptes que no s'utilitzen sovint es poden bloquejar per evitar que siguin utilitzats per atacants.</p> </li> </ol>"},{"location":"ra2/#estableix-una-politica-de-caducitat-per-a-la-contrasenya-dun-usuari-amb-chage","title":"Estableix una pol\u00edtica de caducitat per a la contrasenya d'un usuari amb <code>chage</code>","text":"<p>La comanda <code>chage</code> permet configurar pol\u00edtiques de caducitat de la contrasenya d\u2019un usuari. Aix\u00f2 \u00e9s \u00fatil per obligar els usuaris a canviar la seva contrasenya despr\u00e9s d\u2019un cert temps o per establir altres restriccions.</p> <p>Passos per configurar la caducitat:</p> <ol> <li>Visualitzar les pol\u00edtiques actuals de caducitat de l'usuari:</li> </ol> <p></p> <p>Aix\u00f2 mostrar\u00e0 informaci\u00f3 com:</p> <ul> <li>Data de l\u2019\u00faltim canvi de contrasenya.</li> <li>Dies abans de la caducitat.</li> <li>Dies m\u00ednims i m\u00e0xims entre canvis.</li> <li> <p>Avisos de caducitat.</p> </li> <li> <p>Configurar les pol\u00edtiques amb <code>chage</code>:</p> </li> </ul> <p>Exemple de configuraci\u00f3 per l\u2019usuari <code>alumne1</code>:</p> <p></p> <ul> <li><code>-M 30</code>: La contrasenya caducar\u00e0 cada 30 dies.</li> <li><code>-m 7</code>: L\u2019usuari haur\u00e0 d\u2019esperar almenys 7 dies abans de canviar la contrasenya de nou.</li> <li> <p><code>-W 5</code>: El sistema avisar\u00e0 l\u2019usuari 5 dies abans que la seva contrasenya caduqui.</p> </li> <li> <p>Configurar una data espec\u00edfica de caducitat:</p> </li> </ul> <p>Si vols que la contrasenya caduqui en una data concreta (per exemple, el 31 de desembre de 2024):</p> <p></p> <p>Explicaci\u00f3 del comportament despr\u00e9s de la configuraci\u00f3 - Quan la contrasenya estigui a punt de caducar, l\u2019usuari veur\u00e0 un av\u00eds quan inici\u00ef sessi\u00f3. - Si la contrasenya ja ha caducat, l\u2019usuari haur\u00e0 de canviar-la abans de poder continuar.</p>"},{"location":"ra2/#configuracio-per-defecte-per-a-nous-usuaris","title":"Configuraci\u00f3 per defecte per a nous usuaris","text":"<p>Configuraci\u00f3 al fitxer <code>/etc/default/useradd</code></p> <ol> <li>Edita el fitxer amb un editor de text:</li> </ol> <p><code>sudo nano /etc/default/useradd</code></p> <ol> <li> <p>Modifica els seg\u00fcents par\u00e0metres:</p> </li> <li> <p><code>HOME=/home</code>: Indica que les carpetes dels nous usuaris es crearan dins /home.</p> </li> <li><code>SHELL=/bin/bash</code>: Defineix l'int\u00e8rpret predeterminat com a <code>bash</code>.</li> <li><code>SKEL=/etc/skel</code>: Utilitza <code>/etc/skel</code> com a plantilla per al contingut de la carpeta personal.</li> <li><code>EXPIRE=2025-12-31</code>: Fixa una data de caducitat predeterminada pels comptes.</li> </ol> <p>Exemple del contingut modificat:</p> <p></p> <p>Configuraci\u00f3 al fitxer <code>/etc/login.defs</code></p> <ol> <li>Edita el fitxer:</li> </ol> <p><code>sudo nano /etc/login.defs</code></p> <p></p> <ol> <li> <p>Modifica les configuracions per a les contrasenyes i altres par\u00e0metres:</p> </li> <li> <p><code>PASS_MAX_DAYS 90</code>: La contrasenya caducar\u00e0 cada 90 dies.</p> </li> <li><code>PASS_MIN_DAYS 7</code>: L'usuari haur\u00e0 d'esperar almenys 7 dies abans de canviar la contrasenya.</li> <li><code>PASS_WARN_AGE 5</code>: El sistema avisar\u00e0 5 dies abans que la contrasenya caduqui.</li> <li><code>UID_MIN 1000 i GID_MIN 1000</code>: Els identificadors m\u00ednims per als nous usuaris i grups.</li> </ol> <p>Personalitzaci\u00f3 del directori <code>/etc/skel</code></p> <p>El directori <code>/etc/skel</code> cont\u00e9 els fitxers que es copiaran autom\u00e0ticament a la carpeta personal de cada nou usuari.</p> <ol> <li>Visualitza els fitxers que ja hi ha:</li> </ol> <p></p> <ol> <li> <p>Pots afegir fitxers nous o personalitzar-los:</p> </li> <li> <p>Afegir un fitxer de benvinguda:</p> </li> </ol> <p></p> <ul> <li>Configurar <code>.bashrc</code> o <code>.profile</code>: Personalitza els scripts per defecte d'inici de sessi\u00f3.</li> </ul> <p>Prova de creaci\u00f3 d'un usuari</p> <ol> <li>Crea un usuari nou:</li> </ol> <p></p> <ol> <li>Assigna una contrasenya a l\u2019usuari:</li> </ol> <p></p> <ol> <li> <p>Comprova les configuracions:</p> </li> <li> <p>Carpeta personal: Verifica que s\u2019ha creat i que cont\u00e9 els fitxers de <code>/etc/skel</code>:</p> </li> </ol> <p></p> <ul> <li>Contrasenya i pol\u00edtiques: Utilitza la comanda <code>chage</code> per veure les pol\u00edtiques aplicades:</li> </ul> <p></p> <ul> <li>Shell predeterminat: Verifica que el Shell \u00e9s <code>/bin/bash</code>:</li> </ul> <p></p> <p>Comparaci\u00f3 entre <code>/etc/default/useradd</code> i <code>/etc/adduser.conf</code></p> <ul> <li> <p><code>/etc/default/useradd</code>: Configura par\u00e0metres generals com la carpeta personal, Shell, plantilla, i data de caducitat per a nous usuaris creats amb <code>useradd</code>.</p> </li> <li> <p><code>/etc/adduser.conf</code>: Utilitzat per la comanda <code>adduser</code>, permet m\u00e9s configuracions com el format del nom d\u2019usuari, si es creen grups amb el mateix nom, i altres opcions avan\u00e7ades.</p> </li> </ul> <p>Prova de configuraci\u00f3 personalitzada a <code>/etc/skel</code> i <code>/etc/adduser.conf</code></p> <ol> <li>Personalitzar <code>/etc/skel</code></li> </ol> <p>El directori <code>/etc/skel</code> cont\u00e9 fitxers que es copien autom\u00e0ticament al directori personal dels nous usuaris. Aqu\u00ed pots afegir contingut personalitzat.</p> <p>Passos:</p> <ol> <li>Visualitza els fitxers existents (incloent-hi els ocults):</li> </ol> <p></p> <p>Per defecte, els fitxers s\u00f3n:</p> <ul> <li>.profile: S'executa quan l'usuari inicia sessi\u00f3.</li> <li>.bashrc: Cont\u00e9 configuracions com \u00e0lies i variables.</li> <li> <p>.bash_logout: S'executa quan l'usuari tanca la sessi\u00f3.</p> </li> <li> <p>Personalitza el directori <code>/etc/skel</code>:</p> </li> <li> <p>Afegir un fitxer nou:</p> </li> </ul> <p><code>echo \"Benvingut al sistema!\" | sudo tee /etc/skel/benvinguda.txt</code></p> <p></p> <ul> <li>Modificar <code>.bashrc</code> per afegir \u00e0lies:</li> </ul> <p><code>echo \"alias ll='ls -la'\" | sudo tee -a /etc/skel/.bashrc</code></p> <p></p> <ul> <li>Modificar <code>.profile</code> per afegir un missatge de benvinguda:</li> </ul> <p><code>echo \"echo 'Hola, benvingut a la teva sessi\u00f3!'\" | sudo tee -a /etc/skel/.profile</code></p> <ol> <li>Modificar el fitxer <code>/etc/adduser.conf</code></li> </ol> <p>El fitxer <code>/etc/adduser.conf</code> permet definir opcions per als usuaris creats amb la comanda <code>adduser</code>.</p> <p>Passos:</p> <ol> <li>Edita el fitxer:</li> </ol> <p><code>sudo nano /etc/adduser.conf</code></p> <ol> <li> <p>Realitza les seg\u00fcents modificacions:</p> </li> <li> <p>Grup predeterminat: Canvia el grup inicial:</p> </li> </ol> <p><code>USERGROUPS=yes</code></p> <p></p> <ul> <li>Directori personal: Defineix el format del directori personal:</li> </ul> <p><code>DHOME=/home</code></p> <p></p> <p>Shell predeterminat: Assegura que el Shell sigui /bin/bash:</p> <p><code>DSHELL=/bin/bash</code></p> <p></p> <p>Identificadors d'usuari i grup: Defineix els rangs d'UID i GID:</p> <p><code>FIRST_UID=1000</code></p> <p><code>LAST_UID=60000</code></p> <p><code>FIRST_GID=1000</code></p> <p><code>LAST_GID=60000</code></p> <p></p> <p>Creaci\u00f3 d'un usuari nou i comprovaci\u00f3</p> <ol> <li>Crea un usuari nou amb <code>adduser</code>:</li> </ol> <p><code>sudo adduser prova_usuari</code></p> <p>Durant la creaci\u00f3, pots seguir els passos interactius per definir la contrasenya i altres detalls.</p> <p></p> <ol> <li>Comprova el contingut de la carpeta personal:</li> </ol> <p><code>ls -la /home/prova_usuari</code></p> <p></p> <p>Verificar que s'hagin copiat els fitxers de <code>/etc/skel</code> (inclosos els fitxers ocults).</p> <p></p> <p>Obre el fitxer <code>benvinguda.txt</code> per comprovar-ne el contingut</p> <p><code>cat /home/prova_usuari/benvinguda.txt</code></p> <p></p> <ol> <li> <p>Verifica les configuracions de <code>.bashrc</code> i <code>.profile</code>:</p> </li> <li> <p>Comprova si l'\u00e0lies definit funciona:</p> </li> </ol> <p><code>su - prova_usuari</code></p> <p><code>ll</code></p> <p></p> <ul> <li> <p>Comprova el missatge de benvinguda afegit al <code>.profile</code>: Quan inicies sessi\u00f3, hauria d'apar\u00e8ixer un missatge de benvinguda.</p> </li> <li> <p>Comprova el Shell predeterminat:</p> </li> </ul> <p><code>grep \"prova_usuari\" /etc/passwd</code></p> <p>Fitxers d'usuari per defecte importants</p> <p><code>$HOME/.profile</code></p> <p>Executat cada vegada que un usuari inicia sessi\u00f3. S'hi poden afegir configuracions d'entorn o missatges de benvinguda.</p> <p><code>$HOME/.bashrc</code></p> <p>Cont\u00e9 configuracions del Shell, com ara variables o \u00e0lies.</p> <p><code>$HOME/.bash_logout</code></p> <p>Executat quan l'usuari tanca la sessi\u00f3, ideal per netejar processos temporals.</p> <p>Modificar el fitxer <code>/etc/profile</code></p> <p>El fitxer <code>/etc/profile</code> \u00e9s executat per tots els usuaris quan inicien sessi\u00f3 en un terminal TTY (no en un entorn gr\u00e0fic). Serveix per definir variables d'entorn globals i per establir configuracions que es volen aplicar a tots els usuaris.</p> <p>Acci\u00f3 a realitzar:</p> <p>Afegir una variable d'entorn per definir el directori de treball inicial a tots els usuaris.</p> <p>Com fer-ho:</p> <p>Edita el fitxer <code>/etc/profile</code>:</p> <p><code>sudo nano /etc/profile</code></p> <p>Afegeix la seg\u00fcent l\u00ednia al final del fitxer per establir el directori de treball inicial:</p> <p><code>export DIR_INICIAL=/home/$USER/treball</code></p> <p></p> <p>Guarda i tanca el fitxer.</p> <p>Comprova que la configuraci\u00f3 s'ha aplicat correctament:</p> <ul> <li> <p>Tanca la sessi\u00f3 i torna a iniciar sessi\u00f3 a trav\u00e9s d'un terminal TTY (Ctrl+Alt+F1...F6).</p> </li> <li> <p>Un cop dins, comprova la variable d'entorn:</p> </li> </ul> <p><code>echo $DIR_INICIAL</code></p> <p>Aquesta variable hauria de mostrar el directori configurat per a l'usuari, per exemple: <code>/home/usuari/treball</code>.</p> <p></p> <ul> <li>Modificar el fitxer <code>~/.bashrc</code></li> </ul> <p>El fitxer <code>~/.bashrc</code> es carrega en obrir una nova sessi\u00f3 del shell interactiva (en un terminal). Aquest fitxer s'utilitza per personalitzar l'entorn de l'usuari, incloent-hi configuracions com \u00e0lies, funcions i variables d'entorn locals.</p> <p>Acci\u00f3 a realitzar:</p> <p>Afegir un \u00e0lies personalitzat per simplificar comandes freq\u00fcents.</p> <p>Com fer-ho:</p> <ul> <li>Edita el fitxer <code>~/.bashrc</code> de l'usuari:</li> </ul> <p><code>nano ~/.bashrc</code></p> <ul> <li>Afegeix un \u00e0lies personalitzat per la comanda <code>ls</code>:</li> </ul> <p><code>alias ll='ls -la'</code></p> <p></p> <ol> <li> <p>Guarda i tanca el fitxer.</p> </li> <li> <p>Comprova que l'\u00e0lies funciona:</p> </li> <li> <p>Inicia una nova sessi\u00f3 TTY.</p> </li> <li> <p>Executa l'\u00e0lies:</p> </li> </ol> <p><code>ll</code></p> <p>Aix\u00f2 hauria de mostrar una llista detallada de fitxers i directoris (equivalent a <code>ls -la</code>).</p> <p></p> <p>Modificar el fitxer <code>~/.bash_logout</code></p> <p>El fitxer <code>~/.bash_logout</code> es carrega quan l'usuari tanca una sessi\u00f3 en un terminal. Es pot utilitzar per netejar recursos, escriure missatges o realitzar altres tasques de neteja.</p> <p>Acci\u00f3 a realitzar:</p> <p>Afegir un missatge de comiat personalitzat quan l'usuari tanqui la sessi\u00f3.</p> <p>Com fer-ho:</p> <ul> <li>Edita el fitxer <code>~/.bash_logout</code>:</li> </ul> <p><code>nano ~/.bash_logout</code></p> <ul> <li>Afegeix una l\u00ednia per mostrar un missatge de comiat:</li> </ul> <p><code>echo \"Fins aviat, $USER! Que tinguis un bon dia!\"</code></p> <p></p> <p>Comprova que el missatge es mostra correctament:</p> <ul> <li> <p>Inicia una sessi\u00f3 TTY.</p> </li> <li> <p>Tanca la sessi\u00f3 amb la comanda:</p> </li> </ul> <p><code>exit</code></p> <p>El missatge hauria d'apar\u00e8ixer abans que es tanqui la sessi\u00f3.</p> <p>Resum de les accions realitzades</p> <ol> <li> <p><code>/etc/profile</code>: Hem afegit una variable d'entorn global que es configura a l'inici de la sessi\u00f3 de qualsevol usuari.</p> </li> <li> <p><code>~/.bashrc:</code> Hem creat un \u00e0lies per facilitar l'\u00fas d'una comanda (ll per ls -la).</p> </li> <li> <p><code>~/.bash_logout:</code> Hem configurat un missatge de comiat que es mostra al tancar la sessi\u00f3.</p> </li> </ol> <p>Comprovaci\u00f3 final</p> <p>Per verificar que les configuracions s'han aplicat correctament:</p> <p>Inicia una sessi\u00f3 a TTY (Ctrl+Alt+F1...F6).</p> <p>Verifica la variable d'entorn (per <code>/etc/profile</code>):</p> <p><code>echo $DIR_INICIAL</code></p> <p>Verifica l'\u00e0lies (per <code>~/.bashrc</code>):</p> <p><code>ll</code></p> <p></p> <p>Tanca la sessi\u00f3 i verifica el missatge de comiat (per <code>~/.bash_logout</code>):</p> <p><code>exit</code></p> <p>Aquestes configuracions es compliran nom\u00e9s en sessions natives de terminal (TTY), no en entorns gr\u00e0fics.</p>"},{"location":"ra2/#permisos","title":"PERMISOS","text":""},{"location":"ra2/#que-son-permisos-i-per-a-que-serveixen","title":"Que son permisos i per a que serveixen?","text":"<p>Els permisos en Ubuntu (i en general en sistemes operatius basats en Linux) s\u00f3n una manera de controlar qui pot accedir, modificar o executar fitxers i directoris al sistema. Aquesta caracter\u00edstica \u00e9s essencial per mantenir la seguretat i l'organitzaci\u00f3 en un entorn multiusuari.</p>"},{"location":"ra2/#tipus-de-permisos","title":"Tipus de permisos","text":"<p>Els permisos es classifiquen en tres categories principals:</p> <ul> <li> <p>Lectura (r - Read): Permet veure el contingut del fitxer o llistat dels directoris.</p> </li> <li> <p>Escriptura (w - Write): Permet modificar el fitxer o afegir, eliminar i renombrar elements dins d'un directori.</p> </li> <li> <p>Execuci\u00f3 (x - Execute): Permet executar un fitxer (com un script o programa) o entrar dins d'un directori.</p> </li> </ul>"},{"location":"ra2/#categories-dusuaris","title":"Categories d'usuaris","text":"<p>Els permisos es defineixen per a tres tipus d'usuaris:</p> <ul> <li>Usuari (u - User): El propietari del fitxer o directori.</li> <li>Grup (g - Group): Els membres del grup associat al fitxer o directori.</li> <li>Altres (o - Others): Tots els altres usuaris que no s\u00f3n ni propietaris ni part del grup.</li> </ul> <p>Com es veuen els permisos</p> <p>Quan executes la comanda <code>ls -l</code> en un terminal, veur\u00e0s una sortida similar a aquesta:</p> <p><code>-rwxr-xr--</code></p> <p>Els permisos es divideixen en blocs:</p> <ul> <li>El primer car\u00e0cter indica el tipus d'element (<code>-</code> per a fitxers, <code>d</code> per a directoris).</li> <li>Els seg\u00fcents tres car\u00e0cters s\u00f3n els permisos per al propietari (usuari).</li> <li>Els tres seg\u00fcents s\u00f3n per al grup.</li> <li>Els \u00faltims tres s\u00f3n per a altres.</li> </ul> <p>Exemple:</p> <p><code>-rwxr-xr--</code></p> <ul> <li><code>Usuari:</code> Lectura, escriptura i execuci\u00f3.</li> <li><code>Grup:</code> Lectura i execuci\u00f3.</li> <li><code>Altres:</code> Nom\u00e9s lectura.</li> </ul>"},{"location":"ra2/#per-que-serveixen","title":"Per qu\u00e8 serveixen?","text":"<ul> <li><code>Seguretat:</code> Limitar qui pot accedir i modificar fitxers sensibles.</li> <li><code>Organitzaci\u00f3:</code> Controlar l'acc\u00e9s en entorns multiusuari.</li> <li><code>Control:</code> Assegurar que nom\u00e9s les persones autoritzades poden executar certs fitxers o scripts.</li> </ul>"},{"location":"ra2/#com-canviar-permisos","title":"Com canviar permisos","text":"<p>chmod: Per canviar permisos.</p> <ul> <li>Exemple: chmod u+x fitxer (afegir perm\u00eds d'execuci\u00f3 per a l'usuari).</li> </ul> <p>chown: Per canviar el propietari d'un fitxer o directori.</p> <ul> <li>Exemple: chown usuari fitxer.</li> </ul> <p>chgrp: Per canviar el grup d'un fitxer o directori.</p> <ul> <li>Exemple: chgrp grup fitxer.</li> </ul>"},{"location":"ra2/#exemples-fets-a-classe","title":"Exemples fets a classe","text":"<p>Explicaci\u00f3 de les comandes:</p> <p></p> <p><code>cd /tmp</code></p> <ul> <li>Canviar el directori actual al directori temporal (/tmp).</li> </ul> <p><code>mkdir proves</code></p> <ul> <li>Crear un directori anomenat proves dins de /tmp.</li> </ul> <p><code>touch proves/ffff</code></p> <ul> <li>Crear un fitxer buit anomenat ffff dins del directori proves.</li> </ul> <p><code>sudo chgrp dam proves</code></p> <ul> <li>Afegir usuari prova al grup sudoers</li> </ul> <p></p> <ul> <li>Caviar el grup propietari del directori proves al grup anomenat dam. Aix\u00f2 requereix permisos de superusuari (sudo).</li> </ul> <p><code>chmod -R 750 proves</code></p> <ul> <li>Canviar els permisos del directori proves i el seu contingut de manera recursiva. Aix\u00f2 implica:</li> </ul> <p>Usuari: Lectura, escriptura i execuci\u00f3 (7).</p> <p>Grup: Lectura i execuci\u00f3 (5).</p> <p>Altres: Cap perm\u00eds (0).</p> <p><code>chmod -R g+w,o=- proves</code></p> <ul> <li>Modifico els permisos del directori proves de manera recursiva:</li> </ul> <p>Afegir perm\u00eds d'escriptura al grup (<code>g+w</code>).</p> <p>Eliminar tots els permisos per a altres (<code>o=-</code>).</p> <p><code>cd proves</code></p> <ul> <li>Entro dins del directori proves.</li> </ul> <p><code>touch wwwwww</code></p> <ul> <li>Crear un altre fitxer buit anomenat wwwwww dins del directori proves.</li> </ul> <p><code>rm wwwwww</code></p> <p>Esborres el fitxer wwwwww.</p> <p></p> <p>Primera secci\u00f3 (usuari prova2):</p> <p><code>su prova2</code></p> <p>Intento canviar a l'usuari prova2.</p> <p><code>cd proves/</code> i <code>ls</code></p> <p>Entro al directori proves i llisto el contingut. Aqu\u00ed es mostra el fitxer ffff.</p> <p><code>cat ffff</code></p> <p>Intento llegir el contingut de ffff, per\u00f2 apareix \"Permiso denegado\". Aix\u00f2 passa perqu\u00e8 l'usuari prova2 no t\u00e9 perm\u00eds de lectura sobre el fitxer.</p> <p><code>sudo cat ffff</code></p> <p>Amb privilegis d'administrador (sudo), aconsegueixes llegir el contingut del fitxer ffff.</p> <p><code>touch qqqq</code></p> <p>Intento crear un fitxer nou (qqqq), per\u00f2 l'operaci\u00f3 falla amb \"Permiso denegado\". Aix\u00f2 passa perqu\u00e8 l'usuari prova2 no t\u00e9 perm\u00eds d'escriptura al directori proves.</p> <p><code>rm ffff</code></p> <p>Intento esborrar el fitxer ffff. El sistema detecta que no tinc perm\u00eds d'escriptura al fitxer ni al directori, aix\u00ed que denega l'operaci\u00f3.</p> <p>Segona secci\u00f3 (usuari root):</p> <p><code>exit</code></p> <p>Surto de la sessi\u00f3 de l'usuari prova2.</p> <p><code>mkdir pelis</code></p> <p>Creo un directori nou anomenat pelis al directori /tmp.</p> <p><code>touch scrpt.sh</code></p> <p>Creo un fitxer buit anomenat scrpt.sh dins de /tmp.</p> <p><code>chmod +x scrpt.sh</code></p> <p></p> <p>Explicaci\u00f3 de les operacions</p> <p></p> <p><code>mkdir pelis</code></p> <p>Creo un directori nou anomenat pelis dins de /tmp.</p> <p><code>touch scrpt.sh</code></p> <p>Creo un fitxer buit anomenat scrpt.sh al directori /tmp.</p> <p><code>chmod +x scrpt.sh</code></p> <p>Intento fer executable el fitxer scrpt.sh.</p> <p><code>ls -l</code></p> <p><code>chmod u+s scrpt.sh</code></p> <p>Configuro el setuid al fitxer scrpt.sh, que permet que el programa s'executi amb els permisos del propietari del fitxer en lloc dels de l'usuari que l'executa.</p> <p>Aquesta operaci\u00f3 es realitza correctament despr\u00e9s de verificar el nom correcte del fitxer.</p> <p><code>chmod u-s scrpt.sh</code></p> <p>Elimino el setuid del fitxer scrpt.sh.</p>"},{"location":"ra2/#permisos-finals-de-scrptsh","title":"Permisos finals de scrpt.sh","text":"<p>Amb l'\u00faltima execuci\u00f3 de ls -l, es pot veure:</p> <p><code>-rwxr-xr-x 1 root root 0 nov 19 12:33 scrpt.sh</code></p> <ul> <li>Usuari (root): Lectura, escriptura i execuci\u00f3.</li> <li>Grup: Lectura i execuci\u00f3.</li> <li>Altres: Lectura i execuci\u00f3.</li> </ul> <p>Setuid (u+s):</p> <ul> <li>El perm\u00eds <code>u+s</code> \u00e9s \u00fatil per scripts o programes que necessiten executar-se amb privilegis especials. \u00c9s important utilitzar-lo amb precauci\u00f3, ja que pot suposar un risc de seguretat si es configura incorrectament.</li> </ul> <p></p> <p>Permisos de l'script scrtpt.sh:</p> <ul> <li>S'ha assignat el perm\u00eds SUID a l'script scrtpt.sh amb el comandament chmod 4755 scrtpt.sh. Aix\u00f2 permet que, quan un usuari executi aquest script, ho faci amb els permisos de l'usuari propietari (root).</li> <li>Es comprova els permisos amb ls -l, i es pot veure que ara apareix una \"s\" en el camp dels permisos (rwsr-xr-x).</li> </ul> <p>Permisos del directori pelis:</p> <ul> <li>Tamb\u00e9 s'han modificat els permisos del directori pelis amb chmod 1757 pelis, que inclou el \"sticky bit\". Aix\u00f2 significa que nom\u00e9s el propietari d'un fitxer dins d'aquest directori pot modificar-lo o eliminar-lo, fins i tot si altres usuaris tenen permisos d'escriptura al directori.</li> </ul> <p>Prova amb l'usuari prova:</p> <ul> <li>Es canvia al directori pelis amb l'usuari prova i es crea un fitxer (peli1) amb el comandament touch.</li> <li>Despr\u00e9s, es surt del directori i es prova executar un comandament amb sudo com a usuari prova, per\u00f2 apareix l'error \"orden no encontrada\" perqu\u00e8 aquest usuari no t\u00e9 permisos adequats.</li> </ul> <p>Canvi a l'usuari prova2:</p> <ul> <li>Amb aquest usuari, es crea un segon fitxer (peli2) al directori pelis. Quan es prova eliminar el fitxer peli1 (creat per prova), el sistema demana confirmaci\u00f3 perqu\u00e8 el directori t\u00e9 el \"sticky bit\" activat. Aix\u00f2 impedeix que un usuari que no \u00e9s propietari elimini fitxers d'altres sense autoritzaci\u00f3.</li> </ul> <p>Resultat final:</p> <ul> <li>El fitxer peli1 es protegeix contra eliminaci\u00f3 per usuaris que no en s\u00f3n els propietaris. El fitxer peli2, creat per prova2, segueix accessible i manipulable per aquest usuari.</li> </ul>"},{"location":"ra2/#proves","title":"Proves","text":"<p>Fico el usuari prova3 dins del grup dam i creo un nou usuari prova4.</p> <p></p> <p>Permisos inicials del directori proves:</p> <ul> <li>El directori proves t\u00e9 permisos est\u00e0ndard assignats amb rwx per al propietari (prova), r-x per al grup (dam), i cap perm\u00eds (---) per a altres usuaris.</li> <li>Es comprova aquesta configuraci\u00f3 amb el comandament getfacl proves.</li> </ul> <p>Modificaci\u00f3 dels permisos amb setfacl:</p> <ul> <li>S'assigna una entrada ACL espec\u00edfica per a l'usuari prova3 amb setfacl -m user:prova3:--- proves. Aix\u00f2 denega tots els permisos (lectura, escriptura i execuci\u00f3) per a l'usuari prova3 sobre aquest directori.</li> <li>Es verifica la modificaci\u00f3 amb getfacl proves, i es veu que ara hi ha una entrada espec\u00edfica per a prova3 amb permisos ---.</li> </ul> <p>Prova amb l'usuari prova3:</p> <ul> <li>Es canvia a l'usuari prova3 amb su prova3 i es prova accedir al directori proves amb cd proves. Es mostra un error de \"Permiso denegado\" perqu\u00e8 l'usuari prova3 no t\u00e9 permisos per accedir-hi.</li> <li>Tamb\u00e9 es prova llistar el contingut del directori amb ls proves, per\u00f2 es torna a obtenir l'error de \"Permiso denegado\" per la mateixa ra\u00f3.</li> </ul> <p></p> <p>Vaig comen\u00e7ar verificant els permisos del directori proves amb getfacl proves, i vaig veure que nom\u00e9s tenia els permisos est\u00e0ndard assignats.</p> <p>Despr\u00e9s, vaig utilitzar el comandament setfacl -m user:prova4:rwx proves per donar a l'usuari prova4 permisos complets (rwx) sobre el directori. Per assegurar-me que els permisos s'havien aplicat correctament, vaig executar getfacl proves i vaig comprovar que l'entrada per a prova4 hi apareixia amb els permisos assignats.</p> <p>Per provar-ho, vaig iniciar sessi\u00f3 com a prova4 amb su prova4 i vaig intentar accedir al directori proves. L'acc\u00e9s va ser correcte, confirmant que els permisos configurats funcionaven tal com esperava.</p> <p>Finalment, vaig utilitzar setfacl -b proves per eliminar totes les ACL del directori i vaig comprovar amb getfacl proves que els permisos havien tornat al seu estat original, sense cap entrada ACL addicional.</p>"},{"location":"ra2/#discos","title":"Discos","text":""},{"location":"ra2/#mida-del-sector-i-mida-del-bloc","title":"Mida del sector i mida del bloc","text":"<p>Sector:</p> <ul> <li> <p>\u00c9s la unitat m\u00ednima d'adre\u00e7ament del disc f\u00edsic.</p> </li> <li> <p>La mida del sector sol ser 512 bytes (en discos antics) o 4096 bytes (en discos m\u00e9s nous o Advanced Format).</p> </li> <li> <p>Aquesta mida est\u00e0 definida pel maquinari i no es pot canviar.</p> </li> </ul> <p>Bloc:</p> <ul> <li> <p>\u00c9s la unitat m\u00ednima de gesti\u00f3 del sistema de fitxers.</p> </li> <li> <p>Normalment, un bloc t\u00e9 una mida de 4096 bytes (4 KB), que equival a 8 sectors de 512 bytes.</p> </li> <li> <p>Es pot modificar en el moment de formatejar una partici\u00f3 per optimitzar-ne l'\u00fas, segons el tipus de dades que s'hi emmagatzemaran (per exemple, blocs m\u00e9s grans per fitxers grans).</p> </li> </ul> <p></p>"},{"location":"ra2/#fragmentacio","title":"Fragmentaci\u00f3","text":"<p>La fragmentaci\u00f3 \u00e9s el desordre en com es guarden les dades al disc i pot afectar el rendiment del sistema.</p> <p>Fragmentaci\u00f3 interna:</p> <ul> <li> <p>\u00c9s l'espai desaprofitat dins d'un bloc perqu\u00e8 el fitxer no ocupa tot el bloc.</p> </li> <li> <p>Exemple: si un fitxer ocupa 3000 bytes i el bloc \u00e9s de 4096 bytes, els 1096 bytes restants queden desaprofitats.</p> </li> </ul> <p>Fragmentaci\u00f3 externa:</p> <ul> <li> <p>\u00c9s l'espai lliure dispers entre blocs ocupats. Aix\u00f2 passa quan un fitxer gran es divideix en parts i s'emmagatzema en diversos llocs del disc.</p> </li> <li> <p>Pot alentir les operacions de lectura/escriptura.</p> </li> </ul> <p>Desfragmentaci\u00f3:</p> <ul> <li>Per reduir la fragmentaci\u00f3 en sistemes de fitxers ext4, pots utilitzar la comanda:</li> </ul> <p><code>sudo e4defrag -c /dev/sda2</code></p> <p></p> <ul> <li>Substitueix <code>/dev/sda2</code> pel dispositiu o partici\u00f3 que vols desfragmentar.</li> </ul>"},{"location":"ra2/#tipus-de-formateig","title":"Tipus de formateig","text":"<p>Hi ha diferents tipus de formateig, cadascun amb funcions espec\u00edfiques:</p> <p>Format de baix nivell:</p> <ul> <li> <p>Es fa a nivell f\u00edsic del disc. Borra totes les dades i intenta reparar sectors defectuosos.</p> </li> <li> <p>\u00c9s poc com\u00fa avui dia, ja que els discos moderns v\u00e9nen preformatejats.</p> </li> </ul> <p>Format normal:</p> <ul> <li> <p>Marca els sectors defectuosos i prepara el disc per ser utilitzat.</p> </li> <li> <p>Pot incloure la creaci\u00f3 de taules d'assignaci\u00f3 de fitxers.</p> </li> </ul> <p>Format d'alt nivell:</p> <ul> <li> <p>Nom\u00e9s crea o reinicia el sistema de fitxers sense esborrar f\u00edsicament les dades.</p> </li> <li> <p>Les dades poden ser recuperables mitjan\u00e7ant eines de recuperaci\u00f3.</p> </li> </ul>"},{"location":"ra2/#sistemes-de-fitxers","title":"Sistemes de fitxers","text":"<p>Un sistema de fitxers gestiona com s'emmagatzemen i accedeixen les dades en una partici\u00f3.</p> <p>Tipus comuns:</p> <ul> <li> <p>ext4: Sistema de fitxers modern i per defecte en la majoria de distribucions Linux. Ofereix millores en gesti\u00f3 de grans volums de dades i suport de fitxers grans.</p> </li> <li> <p>NTFS: Sistema utilitzat per Windows.</p> </li> <li> <p>FAT32 / exFAT: Compatibles amb m\u00faltiples sistemes operatius.</p> </li> </ul> <p>Caracter\u00edstiques del ext4:</p> <ul> <li> <p>Millor rendiment i efici\u00e8ncia amb blocs grans.</p> </li> <li> <p>Suporta fitxers de fins a 16 TB i sistemes de fins a 1 EB.</p> </li> <li> <p>Desfragmentaci\u00f3 autom\u00e0tica per reduir la necessitat de desfragmentaci\u00f3 manual.</p> </li> </ul>"},{"location":"ra2/#creacio-de-particions-i-format","title":"Creaci\u00f3 de particions i format","text":"<p>Passos b\u00e0sics:</p> <ul> <li>Crea una partici\u00f3 amb <code>fdisk</code> o <code>parted</code>:</li> </ul> <p><code>sudo fdisk /dev/sdX</code></p> <ul> <li>Dona format a la partici\u00f3:</li> </ul> <p><code>sudo mkfs.ext4 /dev/sdX1</code></p> <p>Substitueix <code>/dev/sdX1</code> pel nom de la partici\u00f3 creada.</p> <p>Canviar la mida del bloc:</p> <ul> <li>Pots especificar la mida del bloc al moment de formatejar:</li> </ul> <p><code>sudo mkfs.ext4 -b 4096 /dev/sdX1</code></p> <p>Aqu\u00ed defines un bloc de 4096 bytes.</p>"},{"location":"ra2/#resum","title":"Resum","text":"<ul> <li> <p>Sector: 512 bytes (unitat f\u00edsica del disc, fixa).</p> </li> <li> <p>Bloc: 4096 bytes (unitat l\u00f2gica del sistema de fitxers, ajustable).</p> </li> <li> <p>Fragmentaci\u00f3: Espai desaprofitat o dispers que afecta el rendiment.</p> </li> <li> <p>Tipus de formateig: Baix nivell, normal, alt nivell.</p> </li> <li> <p>ext4: Sistema de fitxers robust i modern, amb suport per grans volums i efici\u00e8ncia en l'\u00fas de blocs.</p> </li> </ul>"},{"location":"ra2/#formatejar-discos","title":"Formatejar discos","text":"<p>Afegim un disc de 2 gb i mirem quin es el nostre sistema per la terminal.</p> <p><code>fdisk -l</code></p> <p></p> <p>Crear una partici\u00f3 nova:</p> <ul> <li> <p>S'utilitza la comanda fdisk /dev/sdb per gestionar les particions del dispositiu especificat (/dev/sdb).</p> </li> <li> <p>Es tria crear una partici\u00f3 prim\u00e0ria (p) i es defineix la mida (en aquest cas, aproximadament 975,6 MiB).</p> </li> <li> <p>Es confirma l'operaci\u00f3 amb l'opci\u00f3 d'escriptura per aplicar els canvis a la taula de particions.</p> </li> </ul> <p></p> <p>Ordre: n</p> <ul> <li>Selecciona l'opci\u00f3 de crear una nova partici\u00f3.</li> </ul> <p>Tipus de partici\u00f3: p (Prim\u00e0ria)</p> <ul> <li>S'indica que la nova partici\u00f3 ser\u00e0 de tipus prim\u00e0ria.</li> </ul> <p>N\u00famero de partici\u00f3: 1</p> <ul> <li>Es tria el n\u00famero 1 per a la partici\u00f3 que es crear\u00e0.</li> </ul> <p>Primer sector (valor per defecte: 2048):</p> <ul> <li>Es deixa el valor per defecte, que \u00e9s 2048, com a inici de la partici\u00f3.</li> </ul> <p>\u00daltim sector:</p> <ul> <li>Es defineix manualment el tamany de la partici\u00f3 especificant l'\u00faltim sector o utilitzant un valor en megabytes. Aqu\u00ed es fa servir +2000000 sectors, que resulta en una mida aproximada de 975,6 MiB.</li> </ul> <p>Escrivint els canvis al disc</p> <p>Ordre: w</p> <ul> <li>Aquesta ordre escriu els canvis a la taula de particions i sincronitza els discos.</li> <li>S'aplica la nova configuraci\u00f3 al disc f\u00edsic.</li> </ul> <p>Missatge:</p> <ul> <li>\"Se han modificado las tabla de particiones\" indica que els canvis s'han aplicat correctament.</li> </ul> <p>Error amb <code>tune2fs</code></p> <p>Quan s'intenta utilitzar la comanda <code>tune2fs</code> sobre el dispositiu <code>/dev/sdb</code>, apareix un error:</p> <ul> <li>\"N\u00famero m\u00e1gico incorrecto\": Aix\u00f2 significa que no s'ha trobat un sistema de fitxers reconegut en la partici\u00f3. Aix\u00f2 pot ser perqu\u00e8 la partici\u00f3 encara no t\u00e9 format.</li> </ul> <p>Com resoldre-ho</p> <ul> <li>Formateja la partici\u00f3 creada: Despr\u00e9s de crear una partici\u00f3, cal donar-li un sistema de fitxers (com ext4).</li> </ul> <p><code>sudo mkfs.ext4 /dev/sdb1</code></p> <p>Aix\u00f2 aplica un sistema de fitxers ext4 a la partici\u00f3 <code>/dev/sdb1</code>.</p> <ul> <li>Reintenta amb <code>tune2fs</code>: Un cop formatejada la partici\u00f3, pots executar:</li> </ul> <p><code>sudo tune2fs -l /dev/sdb1</code></p> <p>Aix\u00f2 mostrar\u00e0 informaci\u00f3 sobre els par\u00e0metres del sistema de fitxers ext4.</p> <p></p>"},{"location":"ra2/#crear-un-directori-per-muntar-la-particio","title":"Crear un directori per muntar la partici\u00f3","text":"<p><code>mkdir particio1</code></p> <p>Es crea un directori anomenat <code>particio1</code> que servir\u00e0 com a punt de muntatge per a la partici\u00f3.</p> <p>Muntar la partici\u00f3</p> <p>mount -t ext4 /dev/sdb1 /home/ub/particio1</p> <ul> <li>Es munta la partici\u00f3 <code>/dev/sdb1</code> al directori <code>/home/ub/particio1</code>.</li> <li>S'especifica el tipus de sistema de fitxers com a <code>ext4</code>.</li> </ul> <p>Verificar el contingut del punt de muntatge</p> <p><code>ls particio1/</code></p> <ul> <li>Es comprova el contingut de la partici\u00f3 muntada. Inicialment, nom\u00e9s cont\u00e9 el directori lost+found, que \u00e9s un directori especial creat autom\u00e0ticament en particions ext4 per guardar fragments de fitxers recuperats despr\u00e9s d'un error del sistema.</li> </ul> <p>Crear un fitxer dins la partici\u00f3</p> <p><code>touch hola</code></p> <p>Es crea un fitxer buit anomenat <code>hola</code> dins la partici\u00f3 muntada.</p> <p>Intentar desmuntar la partici\u00f3</p> <p><code>umount /dev/sdb1</code></p> <p>Inicialment, la desmuntada falla perqu\u00e8 el punt de muntatge (<code>/home/ub/particio1</code>) est\u00e0 sent utilitzat.</p> <p>Desmuntar la partici\u00f3 amb \u00e8xit</p> <p><code>umount /dev/sdb1</code></p> <ul> <li>Despr\u00e9s de sortir del directori de treball (amb <code>cd ..</code>), es pot desmuntar correctament la partici\u00f3.</li> </ul> <p>Tornar a muntar la partici\u00f3</p> <p><code>mount -t ext4 /dev/sdb1 /home/ub/particio1</code></p> <ul> <li>Es munta novament la partici\u00f3.</li> </ul> <p>Verificar el contingut de la partici\u00f3</p> <p><code>ls particio1/</code></p> <ul> <li>Es comprova que el fitxer creat pr\u00e8viament (hola) continua present dins la partici\u00f3, juntament amb el directori lost+found.</li> </ul> <p></p> <p>Explicaci\u00f3</p> <p><code>/dev/sdb1 /home/ub/particio1 ext4 defaults 0 0</code></p> <ul> <li> <p>/dev/sdb1: Especifica la partici\u00f3 del disc que s'ha de muntar (en aquest cas, la primera partici\u00f3 del disc secundari, sdb).</p> </li> <li> <p>/home/ub/particio1: \u00c9s el directori on es muntar\u00e0 la partici\u00f3, tamb\u00e9 conegut com a punt de muntatge.</p> </li> <li> <p>ext4: Indica el tipus de sistema de fitxers utilitzat a la partici\u00f3 (en aquest cas, ext4).</p> </li> <li> <p>defaults: S\u00f3n les opcions de muntatge predeterminades:</p> </li> <li> <p>Inclou opcions com lectura-escriptura, suport per dispositius, etc.</p> </li> <li> <p>0 (dump): Aquesta partici\u00f3 no ser\u00e0 inclosa en les c\u00f2pies de seguretat autom\u00e0tiques del sistema amb la utilitat dump.</p> </li> <li> <p>0 (fsck): No es comprovar\u00e0 aquesta partici\u00f3 durant l'inici del sistema.</p> </li> </ul> <p>Resum</p> <p>Aquesta l\u00ednia configura que la partici\u00f3 /dev/sdb1 es munti autom\u00e0ticament al directori /home/ub/particio1 amb el sistema de fitxers ext4 i opcions predeterminades, per\u00f2 sense c\u00f2pies de seguretat ni verificacions durant l'inici.</p>"},{"location":"ra2/#compartir-carpetes","title":"Compartir carpetes","text":"<p>Per fer una carpeta compartida primer el que hem de fer es crear la carpeta:</p> <p><code>mkdir particio1</code></p> <p></p> <p><code>chmod 777 particio1</code></p> <ul> <li> <p>Canvia els permisos del directori particio1 a 777, donant acc\u00e9s complet (lectura, escriptura i execuci\u00f3) a tothom:</p> </li> <li> <p>rwx per al propietari, el grup i altres.</p> </li> <li> <p>Aix\u00f2 pot ser \u00fatil per accedir lliurement al directori per\u00f2 no \u00e9s recomanable per seguretat en entorns compartits.</p> </li> </ul> <p><code>chown ub:ub particio1/</code></p> <ul> <li> <p>Canvia el propietari i grup del directori particio1 a l'usuari ub i al grup ub.</p> </li> <li> <p>Aix\u00f2 permet a l'usuari ub tenir control complet del directori.</p> </li> </ul> <p>Fem un apt update.</p> <p>Instalem samba.</p> <p><code>apt install samba nautilus-share</code></p> <p></p> <p>Ara modefico el seguent fintxer </p> <p><code>nano /etc/samba/smb.conf</code></p> <p></p>"},{"location":"ra2/#explicacio-de-la-configuracio-apartat-particio1","title":"Explicaci\u00f3 de la configuraci\u00f3 (apartat [particio1])","text":"<p>L'entrada [particio1] configura la carpeta /home/ub/particio1 per ser compartida via Samba. A continuaci\u00f3 es detalla cada par\u00e0metre:</p> <p><code>path = /home/ub/particio1</code></p> <ul> <li>Especifica el cam\u00ed absolut a la carpeta que es vol compartir.</li> </ul> <p><code>browseable = yes</code></p> <ul> <li>Permet que la carpeta sigui visible a la xarxa quan es navega pels recursos compartits.</li> </ul> <p><code>read only = no</code></p> <ul> <li>Configura la carpeta perqu\u00e8 no sigui nom\u00e9s de lectura. Aix\u00f2 significa que els usuaris autoritzats poden escriure i modificar fitxers.</li> </ul> <p><code>writable = yes</code></p> <ul> <li>Confirma que la carpeta \u00e9s modificable (equivalent a read only = no).</li> </ul> <p><code>guest ok = no</code></p> <ul> <li>Desactiva l'acc\u00e9s an\u00f2nim (sense autenticaci\u00f3). Nom\u00e9s els usuaris amb credencials v\u00e0lides podran accedir-hi.</li> </ul> <p>Ara s'ha de fer un restart del servei i mirar si esta actiu o surt algun error.</p> <p></p> <p>Acc\u00e9s a particio1</p> <ul> <li>Per accedir al recurs compartit particio1 des del client:</li> </ul> <p>Amb smbclient</p> <p><code>smbclient //192.168.201.236/particio1 -U [usuari]</code></p> <ul> <li>Substitueix [usuari] pel nom d'usuari configurat a Samba.</li> </ul> <p>Muntar la compartici\u00f3</p> <ul> <li>A Linux, pots muntar la carpeta amb CIFS:</li> </ul> <p><code>sudo mount -t cifs //192.168.201.236/particio1 /punt/de/muntatge -o username=[usuari]</code></p> <p>Windows</p> <ul> <li>Obre l'explorador de fitxers i escriu:</li> </ul> <p><code>\\\\192.168.201.236\\particio1</code></p> <p></p> <p>Afegir l'usuari al grup sambashare:</p> <p><code>gpasswd -a ub sambashare</code></p> <ul> <li>Aix\u00f2 afegeix l'usuari ub al grup sambashare, que s'utilitza normalment per controlar l'acc\u00e9s als recursos compartits de Samba.</li> </ul> <p>Configurar una contrasenya SMB per a l'usuari:</p> <p><code>smbpasswd -a ub</code></p> <ul> <li>Es demana al administrador que introdueixi i confirmi una nova contrasenya per a l'usuari ub. Aquesta contrasenya ser\u00e0 utilitzada per autenticar-se en els recursos Samba.</li> </ul> <p>Ara anem a la nostra maquina real i dins dels fitxers fem el segunet.</p> <p></p> <p>Anem a la apartat de Altres ubicacions i fiquem smb://ip_del_equip_que_comprateix.</p> <p></p> <p>Fiquem el nom del usuari i contrasenya.</p>"},{"location":"ra2/#copies-de-seguretat","title":"Copies de seguretat","text":""},{"location":"ra2/#conceptes-teorics-sobre-ciberseguretat-i-tipus-de-copies-de-seguretat","title":"Conceptes te\u00f2rics sobre ciberseguretat i tipus de c\u00f2pies de seguretat","text":"<p>Tipus de c\u00f2pies de seguretat</p> <ol> <li>Completes:</li> </ol> <p>. - Descripci\u00f3: C\u00f2pia total de totes les dades seleccionades, sense tenir en compte les versions anteriors.</p> <p>. - Avantatges:</p> <ul> <li> <p>Recuperaci\u00f3 r\u00e0pida i directa.</p> </li> <li> <p>No dep\u00e8n d\u2019altres c\u00f2pies (incrementals o diferencials).</p> </li> </ul> <p>. - Inconvenients:</p> <ul> <li> <p>Molt lenta i pesada, ja que copia tot.</p> </li> <li> <p>Requereix un gran espai d\u2019emmagatzematge.</p> </li> <li> <p>Diferencials:</p> </li> </ul> <p>.- Descripci\u00f3: Copia nom\u00e9s els fitxers que han canviat o s'han afegit des de l\u2019\u00faltima c\u00f2pia completa.</p> <p>.- Avantatges:</p> <ul> <li> <p>M\u00e9s r\u00e0pida que una c\u00f2pia completa.</p> </li> <li> <p>Recuperaci\u00f3 m\u00e9s senzilla que amb incrementals, ja que nom\u00e9s cal la c\u00f2pia completa i la darrera c\u00f2pia diferencial.</p> </li> </ul> <p>.- Inconvenients:</p> <ul> <li> <p>A mesura que passa el temps, la mida de la c\u00f2pia diferencial augmenta.</p> </li> <li> <p>\u00c9s m\u00e9s lenta que una c\u00f2pia incremental.</p> </li> <li> <p>Incrementals:</p> </li> </ul> <p>.- Descripci\u00f3: Copia nom\u00e9s els fitxers que han canviat o s'han afegit des de l\u2019\u00faltima c\u00f2pia, sigui completa, diferencial o incremental.</p> <p>.- Avantatges:</p> <ul> <li> <p>Molt r\u00e0pida i lleugera.</p> </li> <li> <p>Requereix menys espai d\u2019emmagatzematge.</p> </li> </ul> <p>.- Inconvenients:</p> <ul> <li> <p>Recuperaci\u00f3 lenta i complexa, ja que s\u2019han de combinar la c\u00f2pia completa i totes les incrementals fins a l'\u00faltima.</p> </li> <li> <p>Si una c\u00f2pia incremental falla, pot dificultar la recuperaci\u00f3.</p> </li> </ul> <p>Pol\u00edtica de c\u00f2pies de seguretat</p> <p>.- Establir un calendari regular de c\u00f2pies completes, diferencials i incrementals.</p> <p>.- Utilitzar la regla 3-2-1:</p> <ul> <li> <p>3 c\u00f2pies: una c\u00f2pia principal i dues de seguretat.</p> </li> <li> <p>2 tipus d'emmagatzematge diferents (ex. disc local i n\u00favol).</p> </li> <li> <p>1 c\u00f2pia fora de l'oficina o casa.</p> </li> </ul>"},{"location":"ra2/#programes-per-copies-de-seguretat-amb-interficie-grafica","title":"Programes per c\u00f2pies de seguretat amb interf\u00edcie gr\u00e0fica","text":"<ol> <li>Deja Dup:</li> </ol> <p>.- Simple i f\u00e0cil d'usar.</p> <p>.- Compatible amb c\u00f2pies autom\u00e0tiques.</p> <p>.- Suporta emmagatzematge en n\u00favol (Google Drive, Nextcloud, etc.).</p> <ol> <li>Duplicity:</li> </ol> <p>.- Pot fer c\u00f2pies completes, incrementals i diferencials.</p> <p>.- Utilitza compressi\u00f3 i xifrat per protegir les dades.</p> <p>.- Ideal per c\u00f2pies remotes (via FTP, SSH, Amazon S3, etc.).</p>"},{"location":"ra2/#comandes-per-a-copies-de-seguretat","title":"Comandes per a c\u00f2pies de seguretat","text":"<p><code>cp:</code></p> <ul> <li>Descripci\u00f3: C\u00f2pia de fitxers o directoris.</li> </ul> <p>Caracter\u00edstiques:</p> <ul> <li>Simple, nom\u00e9s copia el contingut directament.</li> <li>No \u00e9s intel\u00b7ligent (no detecta canvis).</li> </ul> <p>Exemple:</p> <p><code>cp -r /origen /destinaci\u00f3</code></p> <p><code>rsync:</code></p> <ul> <li>Descripci\u00f3: Eina avan\u00e7ada per sincronitzar fitxers.</li> </ul> <p>Caracter\u00edstiques:</p> <ul> <li> <p>Nom\u00e9s copia els fitxers modificats o nous.</p> </li> <li> <p>Permet c\u00f2pies remotes via SSH.</p> </li> </ul> <p>Exemple:</p> <p><code>rsync -avz /origen/ usuari@servidor:/destinaci\u00f3</code></p> <p><code>dd:</code></p> <ul> <li>Descripci\u00f3: Eina de baix nivell per clonar discos, particions o dades a nivell de blocs.</li> </ul> <p>Caracter\u00edstiques:</p> <ul> <li> <p>C\u00f2pia tot, incloses metadades i espais buits.</p> </li> <li> <p>Ideal per c\u00f2pies exactes de particions o discos.</p> </li> </ul> <p>Exemple:</p> <p><code>dd if=/dev/sda of=/dev/sdb bs=4M</code></p>"},{"location":"ra2/#automatitzacio-de-copies-de-seguretat","title":"Automatitzaci\u00f3 de c\u00f2pies de seguretat","text":"<p>Cron:</p> <ul> <li> <p>Utilitzat per programar tasques peri\u00f2diques.</p> </li> <li> <p>Exemple: Crear un cron job per executar una c\u00f2pia amb rsync cada dia a les 3 AM:</p> </li> </ul> <p><code>crontab -e</code> <code>0 3 * * * rsync -av /origen /destinaci\u00f3</code></p> <p>Anacron:</p> <ul> <li> <p>Alternativa a cron, ideal per tasques que no s'han executat perqu\u00e8 l'ordinador estava apagat.</p> </li> <li> <p>Exemple: Afegir una tasca per executar cada dia:</p> </li> </ul> <p><code>echo \"1 5 backup.daily rsync -av /origen /destinaci\u00f3\" &gt;&gt; /etc/anacrontab</code></p>"},{"location":"ra2/#diferencies-entre-anacron-i-cron","title":"Difer\u00e8ncies entre Anacron i Cron","text":"<p>En sistemes operatius anteriors, Anacron i Cron eren eines separades, cadascuna amb funcions espec\u00edfiques. Ambdues serveixen per automatitzar tasques en sistemes Linux i Unix, per\u00f2 tenen difer\u00e8ncies clau que determinen quan utilitzar una o l'altra.</p>"},{"location":"ra2/#quan-utilitzar-anacron-i-cron","title":"Quan utilitzar Anacron i Cron","text":""},{"location":"ra2/#anacron","title":"Anacron","text":"<ul> <li>Est\u00e0 dissenyat per sistemes que no estan en funcionament de manera constant.</li> <li>Detecta si hi ha tasques programades que no s'han executat a l'hora prevista (perqu\u00e8 l'ordinador estava apagat) i les executa quan el sistema s'engega.</li> <li>S'utilitza per tasques programades que treballen a nivell del sistema operatiu, com manteniments diaris, setmanals o mensuals.</li> </ul> <p>Exemple d'\u00fas: Manteniments autom\u00e0tics en un ordinador d'escriptori que no funciona durant la nit.</p>"},{"location":"ra2/#cron","title":"Cron","text":"<ul> <li>Ideal per a sistemes que estan en funcionament constantment, com servidors.</li> <li>Les tasques s'executen exactament a l'hora programada, per\u00f2 si l'ordinador est\u00e0 apagat en aquell moment, la tasca no es realitzar\u00e0.</li> <li>S'utilitza quan cal executar accions en moments determinats, com enviar notificacions o executar processos nocturns.</li> </ul> <p>Exemple d'\u00fas: Programar una tasca di\u00e0ria a les 3 de la matinada en un servidor.</p>"},{"location":"ra2/#opcions-de-cron","title":"Opcions de Cron","text":""},{"location":"ra2/#arxiu-global","title":"Arxiu Global","text":"<ul> <li>Per configurar tasques globalment (aplicables a tots els usuaris del sistema), s'utilitza l'arxiu <code>/etc/crontab</code>.</li> <li>Aquest arxiu permet gestionar tasques que necessiten permisos de sistema o que afecten diversos usuaris.</li> </ul>"},{"location":"ra2/#configuracio-per-usuari","title":"Configuraci\u00f3 per Usuari","text":"<ul> <li>Quan es vol definir tasques espec\u00edfiques per a un usuari en particular, s'utilitza la comanda:   <code>crontab -e -u usuari</code></li> <li>Aquesta comanda obre un fitxer de configuraci\u00f3 exclusiu per a l'usuari, on es poden programar les tasques personalitzades.</li> </ul>"},{"location":"ra2/#arxius-predefinits-en-etccron","title":"Arxius Predefinits en <code>/etc/cron.*</code>","text":"<ul> <li>Aquests directoris contenen arxius per executar tasques de manera autom\u00e0tica en intervals espec\u00edfics:</li> <li><code>/etc/cron.daily</code>: Tasques que s'executen di\u00e0riament.</li> <li><code>/etc/cron.weekly</code>: Tasques que s'executen setmanalment.</li> <li><code>/etc/cron.monthly</code>: Tasques que s'executen mensualment.</li> </ul> <p>Amb aquesta configuraci\u00f3, es poden automatitzar tasques adaptades a diferents necessitats, optimitzant el rendiment del sistema.</p>"},{"location":"ra2/#proves_1","title":"Proves","text":""},{"location":"ra2/#creacio-i-configuracio-dun-script-per-a-crondaily","title":"Creaci\u00f3 i configuraci\u00f3 d'un script per a <code>cron.daily</code>","text":""},{"location":"ra2/#passos-seguits","title":"Passos seguits:","text":"<ol> <li>Creaci\u00f3 de l'script <code>copia.sh</code>:</li> <li>Es va utilitzar el comandament:      <code>sudo nano copia.sh</code></li> <li> <p>Aix\u00f2 obre l'editor de text nano amb privilegis de superusuari per crear o editar l'script <code>copia.sh</code>. Aquest script cont\u00e9 les instruccions per a una tasca automatitzada.</p> </li> <li> <p>Accedir al directori <code>cron.daily</code>:</p> </li> <li>Es va navegar al directori amb:      <code>cd /etc/cron.daily/</code></li> <li> <p>Aquest directori cont\u00e9 scripts que s'executen autom\u00e0ticament di\u00e0riament gr\u00e0cies al servei cron.</p> </li> <li> <p>Llistat dels scripts presents al directori:</p> </li> <li>Es va executar:      <code>ls</code></li> <li> <p>Aix\u00f2 mostra els scripts existents al directori, incloent-hi el recentment creat <code>copia.sh</code>, juntament amb altres scripts com <code>logrotate</code>, <code>man-db</code>, etc.</p> </li> <li> <p>Renomenar l'script <code>copia.sh</code>:</p> </li> <li>Es va fer servir:      <code>sudo mv copia.sh copia</code></li> <li>Aquest comandament renomena l'script <code>copia.sh</code> a <code>copia</code>. Aix\u00f2 podria ser per uniformitat o per adequar-se a una convenci\u00f3 de noms.</li> </ol>"},{"location":"ra2/#context","title":"Context","text":""},{"location":"ra2/#que-es-etccrondaily","title":"Qu\u00e8 \u00e9s <code>/etc/cron.daily</code>?","text":"<p>El directori <code>/etc/cron.daily</code> forma part del sistema cron, encarregat d'executar tasques automatitzades en intervals regulars. Qualsevol script col\u00b7locat aqu\u00ed s'executar\u00e0 di\u00e0riament sense necessitat de configuracions addicionals.</p>"},{"location":"ra2/#comandaments-utilitzats","title":"Comandaments utilitzats:","text":"<ul> <li><code>sudo nano</code>: Per crear o editar fitxers amb privilegis d'administrador.</li> <li><code>cd</code>: Per canviar de directori.</li> <li><code>ls</code>: Per llistar els continguts d'un directori.</li> <li><code>sudo mv</code>: Per moure o renombrar fitxers amb permisos d'administrador.</li> </ul>"},{"location":"ra2/#exemple-de-contingut-de-lscript-copiash","title":"Exemple de contingut de l'script <code>copia.sh</code>:","text":"<p>Aquest podria ser un exemple b\u00e0sic d'un script de c\u00f2pia de seguretat:</p>"},{"location":"ra2/#binbash","title":"!/bin/bash","text":""},{"location":"ra2/#directori-dorigen","title":"Directori d'origen","text":"<p>origen=\"/home/ub/documents\"</p>"},{"location":"ra2/#directori-de-destinacio","title":"Directori de destinaci\u00f3","text":"<p>destinacio=\"/backup/documents\"</p>"},{"location":"ra2/#copia-dels-fitxers","title":"C\u00f2pia dels fitxers","text":"<p>cp -r \"$origen\" \"$destinacio\"</p> <p></p> <p>Script de C\u00f2pia de Seguretat (copia.sh)</p> <p>Contingut del codi</p> <p></p> <p>Fitxer /var/spool/anacron/cron.daily</p> <p>Contingut</p> <p>Aquest fitxer cont\u00e9 una \u00fanica l\u00ednia amb el valor seg\u00fcent:</p> <p>20250114</p> <p>Explicaci\u00f3</p> <p>Aquesta data (14 de gener de 2025, en format AAAAMMDD) indica l'\u00faltima vegada que es van executar les tasques di\u00e0ries programades per Anacron.</p> <p>Si el sistema estava apagat en alguna execuci\u00f3 di\u00e0ria prevista, Anacron utilitza aquesta data per comprovar quines tasques s'han de recuperar i executar en l'engegada seg\u00fcent. </p>"}]}